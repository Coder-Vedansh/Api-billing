<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Api-Billing Premium Ecosystem Documentation</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --slate-50: #f8fafc;
            --slate-900: #0f172a;
            --brand-600: #4f5aef;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--slate-50);
            color: var(--slate-900);
            line-height: 1.6;
            margin: 0;
            padding: 40px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--brand-600);
        }

        h2 {
            font-size: 1.5rem;
            margin-top: 2rem;
            border-bottom: 2px solid var(--slate-50);
            padding-bottom: 0.5rem;
        }

        p {
            color: #64748b;
        }

        .diagram {
            background: #fdfdfd;
            border: 1px solid #f1f5f9;
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }

        .footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.8rem;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        @media print {
            body {
                padding: 0;
                background: white;
            }

            .container {
                box-shadow: none;
                border: none;
            }
        }
    </style>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
</head>

<body>
    <div class="container">
        <h1>Premium Architecture & Ecosystem Flow</h1>
        <p>Comprehensive technical and user journey documentation for the Api-Billing platform.</p>

        <h2>1. Unified System Architecture</h2>
        <div class="diagram">
            <pre class="mermaid">
graph TD
    subgraph "Main Frontend"
        UI["Main UI (Tailwind v4)"]
        Context["User Context"]
    end

    subgraph "Admin Frontend"
        AUI["Admin UI (Premium Design)"]
        AContext["Admin Context"]
    end

    subgraph "Backend Layer"
        MWARE["Auth Middleware"]
        ROUTES["Unified API Routes"]
        SRVC["Business Logic"]
    end

    subgraph "Persistence & Cloud"
        DB[("(MongoDB)")]
        MAIL["OTP Service"]
        EXT_API["External APIs"]
    end

    UI --> Context
    AUI --> AContext
    Context --> MWARE
    AContext --> MWARE
    MWARE --> ROUTES
    ROUTES --> SRVC
    SRVC --> DB
    SRVC --> MAIL
    SRVC --> EXT_API
            </pre>
        </div>

        <h2>2. UML Use Case Diagram</h2>
        <div class="diagram">
            <pre class="mermaid">
graph LR
    User((User))
    Admin((Admin/SuperAdmin))

    subgraph "Platform Capabilities"
        UC1(Identity Sync & Security)
        UC2(Ecosystem Exploration)
        UC3(Service Subscription)
        UC4(Telemetry Monitoring)
        UC5(Access Key Protocol)
        UC6(Mesh Configuration)
        UC7(Fiscal Auditing)
        UC8(Global Command)
    end

    User --> UC1
    User --> UC2
    User --> UC3
    User --> UC4
    User --> UC5

    Admin --> UC1
    Admin --> UC6
    Admin --> UC7
    Admin --> UC8
            </pre>
        </div>

        <h2>3. Working Flow: Subscription & Telemetry</h2>
        <div class="diagram">
            <pre class="mermaid">
sequenceDiagram
    participant U as User (Frontend)
    participant B as Backend API
    participant D as MongoDB
    participant E as External API

    Note over U,D: Subscription Protocol
    U->>B: POST /services/subscribe/:id
    B->>D: Save Subscriptions
    D-->>B: Acknowledged
    B-->>U: Status 200 (Active)

    Note over U,E: Core Ecosystem Flow
    U->>E: Execute API Request
    E->>B: Validate Key
    B->>D: Audit Limits
    D-->>B: Verified
    B-->>E: Authorized
    E-->>U: Data Result
    E->>B: Report Telemetry
    B->>D: Increment Ledger
            </pre>
        </div>

        <h2>4. Onboarding & State Transitions</h2>
        <div class="diagram">
            <pre class="mermaid">
stateDiagram-v2
    [*] --> LoginPortal
    LoginPortal --> Register: User Sign Up
    Register --> Verify: OTP Auth
    Verify --> Dashboard: Main Terminal
    
    LoginPortal --> AdminPortal: Op Switch
    AdminPortal --> AdminDashboard: Identity Auth
    
    state "Main Features" as AppFeatures {
        Dashboard --> Services: Subscription
        Dashboard --> Profile: Identity
    }

    state "Admin Features" as AdminFeatures {
        AdminDashboard --> ServiceMgmt: Configure Mesh
        AdminDashboard --> UserBilling: Audit Fiscal
    }
            </pre>
        </div>

        <div class="footer">
            &copy; 2026 APIBILL CLOUD ECOSYSTEM // ARCHITECTURE v4.0.1
        </div>
    </div>
</body>

</html>